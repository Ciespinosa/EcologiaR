{
    "contents" : "###Ejercicio 1\n   \ndta<- read.table(\"dta_veg.txt\", header=T)\nstr(dta)\n\n\n#Pregunta 1.\n\n   #Primero es necesario definir como vamos a comparar entre las dos localidades, puesto que tenemos \n   #6 parcelas en cada localidad.  Deberíamos definir primero si juntaremos todas las parcelas para \n   #obtener un valor global en cada localidad.\n   \n   locC<<-colSums(dta[dta$Localidad==\"Chinchas\", 3:42])\n   locA<- colSums(dta[dta$Localidad==\"Alamala\",3:42])\n\n   locC.RA <- locC/sum(locC)\n   locA.RA <- locA/sum(locA)\n   \n   #ponemos en un solo vector\n   \n  loc.RA<- cbind(locA.RA, locC.RA)\n\n##Porcentaje de similitud es igual a la suma \n##de los porcentajes mínimos de cada especie en la comunidad\n\n   mins <- apply(loc.RA, 1, min)\n   mins\n   \n   sum(mins)*100\n   \n    #########\n    ###42.90\n    ########\n\n#######################\n   ### Sorensen: es igual a 2C(especies comunes)/A+B (especies en el sitio A y en el sitioB)\n\n##Definimos las especies que no son compartidas\n\n   comp<- apply(loc.RA, 1, function(abuns) all(abuns != 0))\n   comp\n   \n##Sumamos las especies compartidas\n\n   Rs <- apply(loc.RA, 2, function(x) sum(x > 0))\n   Rs\n\n#aplicamos la formula de sorensen\n   \n   2*sum(comp)/sum(Rs)\n   \n   ##73%\n   \n   \n   \n###################\n#Pregunta 2: Similitud entre altitudes\n \n\n#Comaparamos altitud de 1600 (parcela 3 en Alamala y 11 en ls Chinchas)\n#y hacemos los calculos\n\n#Sumamos las parcelas a 1600 en cada zona\n\na<- apply(dta[3:4,3:42], 2, sum)\nb<- apply(dta[11:12,3:42], 2, sum)\nab<-rbind(a,b) \nab<- ab[,c(apply(dta[c(3,4,11,12),3:42], 2, sum)!=0)]\n\n#Sacamos la abundancia relativa\n\nA16.RA <- t(apply(ab, 1,\n                  function(sp.abun) sp.abun/sum(sp.abun)))\nA16.RA\n\n#Sacamos el índice de similitud\nmins16 <- apply(A16.RA[1:2, ], 2, min)\nmins16\nA16_S<- sum(mins16)*100\n\n#El índice de sorensen\ncomp16<- apply(A16.RA, 2, function(abuns) all(abuns != 0))\ncomp16\n\nRs16 <- apply(A16.RA, 1, function(x) sum(x > 0))\nRs16\nA16_Sor<-2*sum(comp16)/sum(Rs16)\n\n#Sumamos las parcelas a 1900 en cada zona\n\na9<- apply(dta[7:8,3:42], 2, sum)\nb9<- apply(dta[13:14,3:42], 2, sum)\nab9<-rbind(a9,b9) \nab9<- ab9[,c(apply(dta[c(7,8,13,14),3:42], 2, sum)!=0)]\n\n#Sacamos la abundancia relativa\n\nA19.RA <- t(apply(ab9, 1,\n                  function(sp.abun) sp.abun/sum(sp.abun)))\nA19.RA\n\n#Sacamos el índice de similitud\nmins19 <- apply(A19.RA[1:2, ], 2, min)\nmins19\nA19_S<- sum(mins19)*100\n\n#El índice de sorensen\ncomp19<- apply(A19.RA, 2, function(abuns) all(abuns != 0))\ncomp19\n\nRs19 <- apply(A19.RA, 1, function(x) sum(x > 0))\nRs19\nA19_Sor<-2*sum(comp19)/sum(Rs19)\n\n#Sumamos las parcelas a 1500 en cada zona\n\na5<- apply(dta[1:2,3:42], 2, sum)\nb5<- apply(dta[9:10,3:42], 2, sum)\nab5<-rbind(a5,b5) \nab5<- ab5[,c(apply(dta[c(1,2,9,10),3:42], 2, sum)!=0)]\n\n#Sacamos la abundancia relativa\n\nA15.RA <- t(apply(ab5, 1,\n                  function(sp.abun) sp.abun/sum(sp.abun)))\nA15.RA\n\n#Sacamos el índice de similitud\nmins15 <- apply(A15.RA[1:2, ], 2, min)\nmins15\nA15_S<- sum(mins15)*100\n\n#El índice de sorensen\ncomp15<- apply(A15.RA, 2, function(abuns) all(abuns != 0))\ncomp15\n\nRs15 <- apply(A15.RA, 1, function(x) sum(x > 0))\nRs15\nA15_Sor<-2*sum(comp15)/sum(Rs15)\n\n#hacemos una matriz para poner los datos\n\ncomp_tot<- matrix(0,3,2)\ncolnames(comp_tot)<- c(\"simil\", \"Soren\")\nrownames(comp_tot)<- c(\"A1500\", \"A1600\", \"A1900\")\n\ncomp_tot[1,1]<- A15_S\ncomp_tot[1,2]<- A15_Sor\ncomp_tot[2,1]<- A16_S\ncomp_tot[2,2]<- A16_Sor\ncomp_tot[3,1]<- A19_S\ncomp_tot[3,2]<- A19_Sor\n\ncomp_tot[,2]<- comp_tot[,2]*100\n",
    "created" : 1447091723322.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "182291916",
    "id" : "79F6441C",
    "lastKnownWriteTime" : 1447116906,
    "path" : "~/GitHub/EcologiaR/Ejercicio 1/Resolución de ejercicio.R",
    "project_path" : "Resolución de ejercicio.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}